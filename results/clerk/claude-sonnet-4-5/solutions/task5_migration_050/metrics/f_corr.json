{
  "score": 0.0,
  "tests_passed": 1,
  "tests_failed": 1,
  "tests_total": 2,
  "tests_skipped": 0,
  "duration": 8.782016038894653,
  "error": "1 tests failed",
  "failed_tests": [
    "Migration: Server Component v4\u2192v5 \u203a should import from @clerk/nextjs/server"
  ],
  "failure_details": [
    {
      "test_name": "Migration: Server Component v4\u2192v5 \u203a should import from @clerk/nextjs/server",
      "file_path": "tests/migration.test.ts",
      "line_number": 11,
      "error_message": "expect(received).not.toContain(expected)",
      "stack_trace": "\n    expect(received).not.toContain(expected) // indexOf\n\n    Expected substring: not \"/app-beta\"\n    Received string:        \"import { currentUser } from '@clerk/nextjs/server'\n\n    export default async function Profile() {\n      const user = await currentUser()\n\n      if (!user) {\n        return <div>Not signed in</div>\n      }\n\n      return (\n        <div>\n          <h1>{user.firstName}</h1>\n          <p>{user.emailAddresses[0]?.emailAddress}</p>\n        </div>\n      )\n    }\n\n    ## Migration Summary\n\n    ### Key Changes Made:\n\n    1. **Import Path Update**: Changed from `@clerk/nextjs/app-beta` to `@clerk/nextjs/server`\n       - Clerk v5 consolidated server-side imports into the `/server` path\n       - The `/app-beta` path was removed as App Router is now stable\n\n    ### What Stayed the Same:\n\n    - The `currentUser()` function signature and usage remains identical\n    - User object structure and properties are unchanged\n    - Component logic requires no modifications\n\n    ### Additional Notes:\n\n    - This is a straightforward import path migration\n    - No changes to environment variables are needed\n    - The function continues to work as a server component\n    - All user properties (`firstName`, `emailAddresses`, etc.) remain accessible in the same way\n\n    If you have other Clerk v4 server-side utilities in your project (like `auth()`, `clerkClient`, etc.), they should also be imported from `@clerk/nextjs/server` in v5.\"\n\n    \u001b[0m \u001b[90m  9 |\u001b[39m     \u001b[36mconst\u001b[39m profile \u001b[33m=\u001b[39m readFileSync(profilePath\u001b[33m,\u001b[39m \u001b[32m'utf-8'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 10 |\u001b[39m     expect(profile)\u001b[33m.\u001b[39mtoContain(\u001b[32m\"from '@clerk/nextjs/server'\"\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 11 |\u001b[39m     expect(profile)\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoContain(\u001b[32m'/app-beta'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 12 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 13 |\u001b[39m\n     \u001b[90m 14 |\u001b[39m   it(\u001b[32m'should use currentUser from stable path'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.<anonymous> (tests/migration.test.ts:11:25)\n\nTest Suites: 1 failed, 1 total\nTests:       1 failed, 1 passed, 2 total\nSnapshots:   0 total\nTime:        1.264 s\nRan all test suites."
    }
  ],
  "raw_output": "\n> clerk-nextjs-app@0.1.0 test\n> jest\n\nts-jest[config] (WARN) \u001b[94mmessage\u001b[0m\u001b[90m TS151001: \u001b[0mIf you have issues related to imports, you should consider setting `esModuleInterop` to `true` in your TypeScript configuration file (usually `tsconfig.json`). See https://blogs.msdn.microsoft.com/typescript/2018/01/31/announcing-typescript-2-7/#easier-ecmascript-module-interoperability for more information.\nFAIL tests/migration.test.ts\n  Migration: Server Component v4\u2192v5\n    \u2715 should import from @clerk/nextjs/server (2 ms)\n    \u2713 should use currentUser from stable path (1 ms)\n\n  \u25cf Migration: Server Component v4\u2192v5 \u203a should import from @clerk/nextjs/server\n\n    expect(received).not.toContain(expected) // indexOf\n\n    Expected substring: not \"/app-beta\"\n    Received string:        \"import { currentUser } from '@clerk/nextjs/server'\n\n    export default async function Profile() {\n      const user = await currentUser()\n\n      if (!user) {\n        return <div>Not signed in</div>\n      }\n\n      return (\n        <div>\n          <h1>{user.firstName}</h1>\n          <p>{user.emailAddresses[0]?.emailAddress}</p>\n        </div>\n      )\n    }\n\n    ## Migration Summary\n\n    ### Key Changes Made:\n\n    1. **Import Path Update**: Changed from `@clerk/nextjs/app-beta` to `@clerk/nextjs/server`\n       - Clerk v5 consolidated server-side imports into the `/server` path\n       - The `/app-beta` path was removed as App Router is now stable\n\n    ### What Stayed the Same:\n\n    - The `currentUser()` function signature and usage remains identical\n    - User object structure and properties are unchanged\n    - Component logic requires no modifications\n\n    ### Additional Notes:\n\n    - This is a straightforward import path migration\n    - No changes to environment variables are needed\n    - The function continues to work as a server component\n    - All user properties (`firstName`, `emailAddresses`, etc.) remain accessible in the same way\n\n    If you have other Clerk v4 server-side utilities in your project (like `auth()`, `clerkClient`, etc.), they should also be imported from `@clerk/nextjs/server` in v5.\"\n\n    \u001b[0m \u001b[90m  9 |\u001b[39m     \u001b[36mconst\u001b[39m profile \u001b[33m=\u001b[39m readFileSync(profilePath\u001b[33m,\u001b[39m \u001b[32m'utf-8'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m 10 |\u001b[39m     expect(profile)\u001b[33m.\u001b[39mtoContain(\u001b[32m\"from '@clerk/nextjs/server'\"\u001b[39m)\u001b[33m;\u001b[39m\n    \u001b[31m\u001b[1m>\u001b[22m\u001b[39m\u001b[90m 11 |\u001b[39m     expect(profile)\u001b[33m.\u001b[39mnot\u001b[33m.\u001b[39mtoContain(\u001b[32m'/app-beta'\u001b[39m)\u001b[33m;\u001b[39m\n     \u001b[90m    |\u001b[39m                         \u001b[31m\u001b[1m^\u001b[22m\u001b[39m\n     \u001b[90m 12 |\u001b[39m   })\u001b[33m;\u001b[39m\n     \u001b[90m 13 |\u001b[39m\n     \u001b[90m 14 |\u001b[39m   it(\u001b[32m'should use currentUser from stable path'\u001b[39m\u001b[33m,\u001b[39m () \u001b[33m=>\u001b[39m {\u001b[0m\n\n      at Object.<anonymous> (tests/migration.test.ts:11:25)\n\nTest Suites: 1 failed, 1 total\nTests:       1 failed, 1 passed, 2 total\nSnapshots:   0 total\nTime:        1.264 s\nRan all test suites.\n"
}