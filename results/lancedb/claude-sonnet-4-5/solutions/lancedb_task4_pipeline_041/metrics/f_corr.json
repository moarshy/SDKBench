{
  "score": 0.0,
  "tests_passed": 0,
  "tests_failed": 3,
  "tests_total": 3,
  "tests_skipped": 0,
  "duration": 8.672141075134277,
  "error": "3 tests failed",
  "failed_tests": [
    "test_document_ingestion",
    "test_search_returns_results",
    "test_pipeline_end_to_end"
  ],
  "failure_details": [
    {
      "test_name": "test_document_ingestion",
      "file_path": "tests/test_pipeline.py",
      "line_number": 13,
      "error_message": "RuntimeError: lance ...",
      "stack_trace": "tests/test_pipeline.py:13: in test_document_ingestion\n    count = pipeline.ingest_documents(docs)\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nexpected/pipeline.py:124: in ingest_documents\n    table.create_index(metric=\"cosine\", num_partitions=2, num_sub_vectors=2)\n/Users/arshath/miniforge3/lib/python3.12/site-packages/lancedb/table.py:2095: in create_index\n    return LOOP.run(\n/Users/arshath/miniforge3/lib/python3.12/site-packages/lancedb/background_loop.py:25: in run\n    return asyncio.run_coroutine_threadsafe(future, self.loop).result()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n/Users/arshath/miniforge3/lib/python3.12/concurrent/futures/_base.py:456: in result\n    return self.__get_result()\n           ^^^^^^^^^^^^^^^^^^^\n/Users/arshath/miniforge3/lib/python3.12/concurrent/futures/_base.py:401: in __get_result\n    raise self._exception\n/Users/arshath/miniforge3/lib/python3.12/site-packages/lancedb/table.py:3415: in create_index\n    await self._inner.create_index(\nE   RuntimeError: lance error: LanceError(Index): KMeans: can not train 2 centroids with 1 vectors, choose a smaller K (< 1) instead, /Users/runner/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/lance-index-0.39.0/src/vector/kmeans.rs:1324:21\n----------------------------- Captured stdout call -----------------------------\nGenerating embeddings for 1 documents...\nCreating vector index...\n----------------------------- Captured stderr call -----------------------------\n\nBatches:   0%|          | 0/1 [00:00<?, ?it/s]\nBatches: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 1/1 [00:00<00:00,  8.09it/s]\nBatches: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 1/1 [00:00<00:00,  8.08it/s]"
    },
    {
      "test_name": "test_search_returns_results",
      "file_path": "tests/test_pipeline.py",
      "line_number": 22,
      "error_message": "RuntimeError: la...",
      "stack_trace": "tests/test_pipeline.py:22: in test_search_returns_results\n    pipeline.ingest_documents(docs)\nexpected/pipeline.py:124: in ingest_documents\n    table.create_index(metric=\"cosine\", num_partitions=2, num_sub_vectors=2)\n/Users/arshath/miniforge3/lib/python3.12/site-packages/lancedb/table.py:2095: in create_index\n    return LOOP.run(\n/Users/arshath/miniforge3/lib/python3.12/site-packages/lancedb/background_loop.py:25: in run\n    return asyncio.run_coroutine_threadsafe(future, self.loop).result()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n/Users/arshath/miniforge3/lib/python3.12/concurrent/futures/_base.py:456: in result\n    return self.__get_result()\n           ^^^^^^^^^^^^^^^^^^^\n/Users/arshath/miniforge3/lib/python3.12/concurrent/futures/_base.py:401: in __get_result\n    raise self._exception\n/Users/arshath/miniforge3/lib/python3.12/site-packages/lancedb/table.py:3415: in create_index\n    await self._inner.create_index(\nE   RuntimeError: lance error: LanceError(Index): KMeans: can not train 2 centroids with 1 vectors, choose a smaller K (< 1) instead, /Users/runner/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/lance-index-0.39.0/src/vector/kmeans.rs:1324:21\n----------------------------- Captured stdout call -----------------------------\nGenerating embeddings for 1 documents...\nCreating vector index...\n----------------------------- Captured stderr call -----------------------------\n\nBatches:   0%|          | 0/1 [00:00<?, ?it/s]\nBatches: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 1/1 [00:00<00:00, 17.92it/s]"
    },
    {
      "test_name": "test_pipeline_end_to_end",
      "file_path": "tests/test_pipeline.py",
      "line_number": 34,
      "error_message": "RuntimeError: lance...",
      "stack_trace": "tests/test_pipeline.py:34: in test_pipeline_end_to_end\n    pipeline.ingest_documents(docs)\nexpected/pipeline.py:124: in ingest_documents\n    table.create_index(metric=\"cosine\", num_partitions=2, num_sub_vectors=2)\n/Users/arshath/miniforge3/lib/python3.12/site-packages/lancedb/table.py:2095: in create_index\n    return LOOP.run(\n/Users/arshath/miniforge3/lib/python3.12/site-packages/lancedb/background_loop.py:25: in run\n    return asyncio.run_coroutine_threadsafe(future, self.loop).result()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n/Users/arshath/miniforge3/lib/python3.12/concurrent/futures/_base.py:456: in result\n    return self.__get_result()\n           ^^^^^^^^^^^^^^^^^^^\n/Users/arshath/miniforge3/lib/python3.12/concurrent/futures/_base.py:401: in __get_result\n    raise self._exception\n/Users/arshath/miniforge3/lib/python3.12/site-packages/lancedb/table.py:3415: in create_index\n    await self._inner.create_index(\nE   RuntimeError: lance error: LanceError(Index): KMeans: can not train 2 centroids with 1 vectors, choose a smaller K (< 1) instead, /Users/runner/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/lance-index-0.39.0/src/vector/kmeans.rs:1324:21\n----------------------------- Captured stdout call -----------------------------\nGenerating embeddings for 1 documents...\nCreating vector index...\n----------------------------- Captured stderr call -----------------------------\n\nBatches:   0%|          | 0/1 [00:00<?, ?it/s]\nBatches: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 1/1 [00:00<00:00, 102.33it/s]"
    }
  ],
  "raw_output": "============================= test session starts ==============================\nplatform darwin -- Python 3.12.0, pytest-9.0.1, pluggy-1.6.0 -- /Users/arshath/miniforge3/bin/python\ncachedir: .pytest_cache\nrootdir: /private/var/folders/wx/bj4n9pyj10n74txq4mpt0j9h0000gn/T/fcorr_us9zx4om\nplugins: anyio-4.7.0\ncollecting ... collected 3 items\n\ntests/test_pipeline.py::test_document_ingestion FAILED                   [ 33%]\ntests/test_pipeline.py::test_search_returns_results FAILED               [ 66%]\ntests/test_pipeline.py::test_pipeline_end_to_end FAILED                  [100%]\n\n=================================== FAILURES ===================================\n___________________________ test_document_ingestion ____________________________\ntests/test_pipeline.py:13: in test_document_ingestion\n    count = pipeline.ingest_documents(docs)\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nexpected/pipeline.py:124: in ingest_documents\n    table.create_index(metric=\"cosine\", num_partitions=2, num_sub_vectors=2)\n/Users/arshath/miniforge3/lib/python3.12/site-packages/lancedb/table.py:2095: in create_index\n    return LOOP.run(\n/Users/arshath/miniforge3/lib/python3.12/site-packages/lancedb/background_loop.py:25: in run\n    return asyncio.run_coroutine_threadsafe(future, self.loop).result()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n/Users/arshath/miniforge3/lib/python3.12/concurrent/futures/_base.py:456: in result\n    return self.__get_result()\n           ^^^^^^^^^^^^^^^^^^^\n/Users/arshath/miniforge3/lib/python3.12/concurrent/futures/_base.py:401: in __get_result\n    raise self._exception\n/Users/arshath/miniforge3/lib/python3.12/site-packages/lancedb/table.py:3415: in create_index\n    await self._inner.create_index(\nE   RuntimeError: lance error: LanceError(Index): KMeans: can not train 2 centroids with 1 vectors, choose a smaller K (< 1) instead, /Users/runner/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/lance-index-0.39.0/src/vector/kmeans.rs:1324:21\n----------------------------- Captured stdout call -----------------------------\nGenerating embeddings for 1 documents...\nCreating vector index...\n----------------------------- Captured stderr call -----------------------------\n\nBatches:   0%|          | 0/1 [00:00<?, ?it/s]\nBatches: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 1/1 [00:00<00:00,  8.09it/s]\nBatches: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 1/1 [00:00<00:00,  8.08it/s]\n_________________________ test_search_returns_results __________________________\ntests/test_pipeline.py:22: in test_search_returns_results\n    pipeline.ingest_documents(docs)\nexpected/pipeline.py:124: in ingest_documents\n    table.create_index(metric=\"cosine\", num_partitions=2, num_sub_vectors=2)\n/Users/arshath/miniforge3/lib/python3.12/site-packages/lancedb/table.py:2095: in create_index\n    return LOOP.run(\n/Users/arshath/miniforge3/lib/python3.12/site-packages/lancedb/background_loop.py:25: in run\n    return asyncio.run_coroutine_threadsafe(future, self.loop).result()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n/Users/arshath/miniforge3/lib/python3.12/concurrent/futures/_base.py:456: in result\n    return self.__get_result()\n           ^^^^^^^^^^^^^^^^^^^\n/Users/arshath/miniforge3/lib/python3.12/concurrent/futures/_base.py:401: in __get_result\n    raise self._exception\n/Users/arshath/miniforge3/lib/python3.12/site-packages/lancedb/table.py:3415: in create_index\n    await self._inner.create_index(\nE   RuntimeError: lance error: LanceError(Index): KMeans: can not train 2 centroids with 1 vectors, choose a smaller K (< 1) instead, /Users/runner/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/lance-index-0.39.0/src/vector/kmeans.rs:1324:21\n----------------------------- Captured stdout call -----------------------------\nGenerating embeddings for 1 documents...\nCreating vector index...\n----------------------------- Captured stderr call -----------------------------\n\nBatches:   0%|          | 0/1 [00:00<?, ?it/s]\nBatches: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 1/1 [00:00<00:00, 17.92it/s]\n___________________________ test_pipeline_end_to_end ___________________________\ntests/test_pipeline.py:34: in test_pipeline_end_to_end\n    pipeline.ingest_documents(docs)\nexpected/pipeline.py:124: in ingest_documents\n    table.create_index(metric=\"cosine\", num_partitions=2, num_sub_vectors=2)\n/Users/arshath/miniforge3/lib/python3.12/site-packages/lancedb/table.py:2095: in create_index\n    return LOOP.run(\n/Users/arshath/miniforge3/lib/python3.12/site-packages/lancedb/background_loop.py:25: in run\n    return asyncio.run_coroutine_threadsafe(future, self.loop).result()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n/Users/arshath/miniforge3/lib/python3.12/concurrent/futures/_base.py:456: in result\n    return self.__get_result()\n           ^^^^^^^^^^^^^^^^^^^\n/Users/arshath/miniforge3/lib/python3.12/concurrent/futures/_base.py:401: in __get_result\n    raise self._exception\n/Users/arshath/miniforge3/lib/python3.12/site-packages/lancedb/table.py:3415: in create_index\n    await self._inner.create_index(\nE   RuntimeError: lance error: LanceError(Index): KMeans: can not train 2 centroids with 1 vectors, choose a smaller K (< 1) instead, /Users/runner/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/lance-index-0.39.0/src/vector/kmeans.rs:1324:21\n----------------------------- Captured stdout call -----------------------------\nGenerating embeddings for 1 documents...\nCreating vector index...\n----------------------------- Captured stderr call -----------------------------\n\nBatches:   0%|          | 0/1 [00:00<?, ?it/s]\nBatches: 100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 1/1 [00:00<00:00, 102.33it/s]\n=========================== short test summary info ============================\nFAILED tests/test_pipeline.py::test_document_ingestion - RuntimeError: lance ...\nFAILED tests/test_pipeline.py::test_search_returns_results - RuntimeError: la...\nFAILED tests/test_pipeline.py::test_pipeline_end_to_end - RuntimeError: lance...\n============================== 3 failed in 7.29s ===============================\n"
}