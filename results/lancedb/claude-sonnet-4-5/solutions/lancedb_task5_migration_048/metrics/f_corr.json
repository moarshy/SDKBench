{
  "score": 0.0,
  "tests_passed": 1,
  "tests_failed": 2,
  "tests_total": 3,
  "tests_skipped": 0,
  "duration": 1.788454294204712,
  "error": "2 tests failed",
  "failed_tests": [
    "test_backup_returns_dataframe",
    "test_full_migration"
  ],
  "failure_details": [
    {
      "test_name": "test_backup_returns_dataframe",
      "file_path": "tests/test_migration.py",
      "line_number": 13,
      "error_message": "TypeError: ba...",
      "stack_trace": "tests/test_migration.py:13: in test_backup_returns_dataframe\n    backup = migration.backup_data(\"nonexistent_table\")\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nE   TypeError: backup_data() missing 1 required positional argument: 'table_name'"
    },
    {
      "test_name": "test_full_migration",
      "file_path": "tests/test_migration.py",
      "line_number": 34,
      "error_message": "ValueError: Table 'docu...",
      "stack_trace": "tests/test_migration.py:34: in test_full_migration\n    success = migration.run_migration()\n              ^^^^^^^^^^^^^^^^^^^^^^^^^\nexpected/migration.py:218: in run_migration\n    backup_df = backup_data(db, table_name)\n                ^^^^^^^^^^^^^^^^^^^^^^^^^^^\nexpected/migration.py:61: in backup_data\n    table = db.open_table(table_name)\n            ^^^^^^^^^^^^^^^^^^^^^^^^^\n/Users/arshath/miniforge3/lib/python3.12/site-packages/lancedb/db.py:694: in open_table\n    return LanceTable.open(\n/Users/arshath/miniforge3/lib/python3.12/site-packages/lancedb/table.py:1747: in open\n    tbl = cls(db, name, namespace=namespace, **kwargs)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n/Users/arshath/miniforge3/lib/python3.12/site-packages/lancedb/table.py:1720: in __init__\n    self._table = LOOP.run(\n/Users/arshath/miniforge3/lib/python3.12/site-packages/lancedb/background_loop.py:25: in run\n    return asyncio.run_coroutine_threadsafe(future, self.loop).result()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n/Users/arshath/miniforge3/lib/python3.12/concurrent/futures/_base.py:456: in result\n    return self.__get_result()\n           ^^^^^^^^^^^^^^^^^^^\n/Users/arshath/miniforge3/lib/python3.12/concurrent/futures/_base.py:401: in __get_result\n    raise self._exception\n/Users/arshath/miniforge3/lib/python3.12/site-packages/lancedb/db.py:1226: in open_table\n    table = await self._inner.open_table(\nE   ValueError: Table 'documents' was not found\n----------------------------- Captured stdout call -----------------------------\n============================================================\nStarting LanceDB Schema Migration\n============================================================\n\n[1/5] Connecting to database...\n\u2713 Connected to database at ./my_lancedb\n\n[2/5] Backing up existing data...\n\u2717 Failed to backup data: Table 'documents' was not found\n\n============================================================\n\u2717 Migration failed: Table 'documents' was not found\n============================================================"
    }
  ],
  "raw_output": "============================= test session starts ==============================\nplatform darwin -- Python 3.12.0, pytest-9.0.1, pluggy-1.6.0 -- /Users/arshath/miniforge3/bin/python\ncachedir: .pytest_cache\nrootdir: /private/var/folders/wx/bj4n9pyj10n74txq4mpt0j9h0000gn/T/fcorr_8mptddra\nplugins: anyio-4.7.0\ncollecting ... collected 3 items\n\ntests/test_migration.py::test_backup_returns_dataframe FAILED            [ 33%]\ntests/test_migration.py::test_migrate_data_transforms PASSED             [ 66%]\ntests/test_migration.py::test_full_migration FAILED                      [100%]\n\n=================================== FAILURES ===================================\n________________________ test_backup_returns_dataframe _________________________\ntests/test_migration.py:13: in test_backup_returns_dataframe\n    backup = migration.backup_data(\"nonexistent_table\")\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nE   TypeError: backup_data() missing 1 required positional argument: 'table_name'\n_____________________________ test_full_migration ______________________________\ntests/test_migration.py:34: in test_full_migration\n    success = migration.run_migration()\n              ^^^^^^^^^^^^^^^^^^^^^^^^^\nexpected/migration.py:218: in run_migration\n    backup_df = backup_data(db, table_name)\n                ^^^^^^^^^^^^^^^^^^^^^^^^^^^\nexpected/migration.py:61: in backup_data\n    table = db.open_table(table_name)\n            ^^^^^^^^^^^^^^^^^^^^^^^^^\n/Users/arshath/miniforge3/lib/python3.12/site-packages/lancedb/db.py:694: in open_table\n    return LanceTable.open(\n/Users/arshath/miniforge3/lib/python3.12/site-packages/lancedb/table.py:1747: in open\n    tbl = cls(db, name, namespace=namespace, **kwargs)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n/Users/arshath/miniforge3/lib/python3.12/site-packages/lancedb/table.py:1720: in __init__\n    self._table = LOOP.run(\n/Users/arshath/miniforge3/lib/python3.12/site-packages/lancedb/background_loop.py:25: in run\n    return asyncio.run_coroutine_threadsafe(future, self.loop).result()\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n/Users/arshath/miniforge3/lib/python3.12/concurrent/futures/_base.py:456: in result\n    return self.__get_result()\n           ^^^^^^^^^^^^^^^^^^^\n/Users/arshath/miniforge3/lib/python3.12/concurrent/futures/_base.py:401: in __get_result\n    raise self._exception\n/Users/arshath/miniforge3/lib/python3.12/site-packages/lancedb/db.py:1226: in open_table\n    table = await self._inner.open_table(\nE   ValueError: Table 'documents' was not found\n----------------------------- Captured stdout call -----------------------------\n============================================================\nStarting LanceDB Schema Migration\n============================================================\n\n[1/5] Connecting to database...\n\u2713 Connected to database at ./my_lancedb\n\n[2/5] Backing up existing data...\n\u2717 Failed to backup data: Table 'documents' was not found\n\n============================================================\n\u2717 Migration failed: Table 'documents' was not found\n============================================================\n=========================== short test summary info ============================\nFAILED tests/test_migration.py::test_backup_returns_dataframe - TypeError: ba...\nFAILED tests/test_migration.py::test_full_migration - ValueError: Table 'docu...\n========================= 2 failed, 1 passed in 0.97s ==========================\n"
}